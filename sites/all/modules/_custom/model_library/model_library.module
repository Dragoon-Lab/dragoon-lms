<?php

function model_library_block_info(){
	$blocks = array();
	$blocks['published_problems'] = array(
		'info' => 'Creates block for published problems'
	);
    $blocks['non_class_models'] = array(
      'info' => 'Block lists non class models'
    );
    $blocks['non_class_models_buttons'] = array(
      'info' => 'Non Class Models Functional Buttons List'
    );
    return $blocks;
}

function model_library_block_view($delta = ""){
	$block = array();
	switch ($delta){

		case "published_problems":
            $block['subject'] = t('Model Library');
			$parameters = array(
				'href' => 'modal_window?p='
			);
			$json = file_get_contents(drupal_get_path('module', 'model_library').'/public_problem_index.json');
			$block['content'] = getHTMLStructure($json, $parameters);
			break;
        case "non_class_models":
            global $user;
            $block['subject'] = t('Non Class Models');
            $parameters = array(
                'href' => 'modal_window?p='
            );
            if(user_is_logged_in()) {
                $json = loadNCModels($user->name);
                $block['content'] = getHTMLStructure($json, $parameters);
                $additional = '<div class="nc_func_but container non-class-buttons">
                                <div class="row">
                                    <ul class="col-md-12 col-sm-12">
                                        <li><a href="#createFolder" class="btn btn-success btn-md">create folder</a></li>
                                        <li><a href="#deleteFolder" class="btn btn-success btn-md">delete folder</a></li>
                                        <li><a href="#deleteFolder" class="btn btn-success btn-md">create model</a></li>
                                        <li><a href="#deleteFolder" class="btn btn-success btn-md">delete model</a></li>
                                    </ul>
                                </div>
                            </div>';
                $block['content'] = $block['content'].$additional;
            }
            else
                $block['content'] = "Please Login to check your non class models";
            break;
    }

	return $block;
}
